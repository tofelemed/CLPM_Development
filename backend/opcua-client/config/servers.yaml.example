version: "1.0"

# OPC UA Server Configurations
servers:
  - id: demo-server
    name: Demo OPC UA Server
    endpointUrl: opc.tcp://localhost:4840
    securityPolicy: None
    securityMode: None
    userAuthMethod: anonymous
    trustUnknownCerts: true
    samplingInterval: 200
    maxSessionSubscriptions: 1000
    redundantEndpoints: []
    enabled: true

  - id: production-server-1
    name: Production Server 1
    endpointUrl: opc.tcp://prod-server-1:4840
    securityPolicy: Basic256Sha256
    securityMode: SignAndEncrypt
    userAuthMethod: username
    username: opcua_user
    password: secure_password
    trustUnknownCerts: false
    samplingInterval: 500
    maxSessionSubscriptions: 500
    redundantEndpoints:
      - opc.tcp://prod-server-1-backup:4840
    enabled: true

  - id: production-server-2
    name: Production Server 2
    endpointUrl: opc.tcp://prod-server-2:4840
    securityPolicy: Basic256Sha256
    securityMode: SignAndEncrypt
    userAuthMethod: certificate
    userCertificate: /app/certificates/user/client_user.pem
    userPrivateKey: /app/certificates/user/client_user_key.pem
    trustUnknownCerts: false
    samplingInterval: 1000
    maxSessionSubscriptions: 200
    redundantEndpoints: []
    enabled: false

# Loop Subscriptions
loops:
  - loopId: LOOP-001
    serverId: demo-server
    enabled: true
    tags:
      pv:
        nodeId: ns=2;s=Process.PV
        samplingInterval: 200
        queueSize: 10
        discardOldest: true
      op:
        nodeId: ns=2;s=Process.OP
        samplingInterval: 200
        queueSize: 10
        discardOldest: true
      sp:
        nodeId: ns=2;s=Process.SP
        samplingInterval: 1000
        queueSize: 5
        discardOldest: true
      mode:
        nodeId: ns=2;s=Process.Mode
        samplingInterval: 5000
        queueSize: 3
        discardOldest: true

  - loopId: LOOP-002
    serverId: demo-server
    enabled: true
    tags:
      pv:
        nodeId: ns=2;s=Tank.Level
        samplingInterval: 500
        queueSize: 10
        discardOldest: true
        deadbandAbsolute: 0.1
      op:
        nodeId: ns=2;s=Tank.Valve
        samplingInterval: 500
        queueSize: 10
        discardOldest: true
        deadbandPercent: 1.0

  - loopId: LOOP-003
    serverId: production-server-1
    enabled: true
    tags:
      pv:
        nodeId: ns=3;s=Reactor.Temperature
        samplingInterval: 200
        queueSize: 20
        discardOldest: true
        deadbandAbsolute: 0.5
      op:
        nodeId: ns=3;s=Reactor.Heater.Output
        samplingInterval: 200
        queueSize: 20
        discardOldest: true
      sp:
        nodeId: ns=3;s=Reactor.Temperature.Setpoint
        samplingInterval: 1000
        queueSize: 5
        discardOldest: true
      mode:
        nodeId: ns=3;s=Reactor.Control.Mode
        samplingInterval: 5000
        queueSize: 3
        discardOldest: true

  - loopId: LOOP-004
    serverId: production-server-1
    enabled: false
    tags:
      pv:
        nodeId: ns=3;s=Distillation.Column.Pressure
        samplingInterval: 1000
        queueSize: 10
        discardOldest: true
      valve:
        nodeId: ns=3;s=Distillation.Column.Valve.Position
        samplingInterval: 500
        queueSize: 15
        discardOldest: true